"use strict";(self.webpackChunk_zignaly_open_ui=self.webpackChunk_zignaly_open_ui||[]).push([[6618],{"./src/components/display/ZigChart/ZigChart/util.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>useTicks,w:()=>useChartColor});var _mui_material__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@mui/material/styles/useTheme.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),victory_vendor_d3_scale__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/d3-scale/src/linear.js");function useChartColor(){const theme=(0,_mui_material__WEBPACK_IMPORTED_MODULE_1__.Z)();return{green:theme.palette.chart.green,red:theme.palette.chart.red}}const useTicks=(data,yDomain,tickCount,onlyIntegerTicks=!1,showCurrentTick=!1,height=0)=>(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>{const lastDataY=data[data.length-1]?.y,ticks=victory_vendor_d3_scale__WEBPACK_IMPORTED_MODULE_2__.Z().domain(yDomain).ticks(tickCount).filter((v=>!onlyIntegerTicks||Number.isInteger(v)));if(!showCurrentTick)return ticks;const scale=victory_vendor_d3_scale__WEBPACK_IMPORTED_MODULE_2__.Z().domain(yDomain).range([0,height]),lastDataPointPositionScaled=scale(lastDataY),overlapsExistingTick=ticks.find((existingTickPosition=>{const existingTickPositionScaled=scale(existingTickPosition);return Math.abs(existingTickPositionScaled-lastDataPointPositionScaled)<14}));return[...overlapsExistingTick?ticks.filter((tick=>tick!==overlapsExistingTick)):ticks,lastDataY]}),[data,yDomain,tickCount,onlyIntegerTicks,height])},"./src/components/display/ZigChart/ZigChartMini/stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ExampleChart:()=>ExampleChart,ExampleChart2:()=>ExampleChart2,default:()=>stories});__webpack_require__("../../node_modules/react/index.js");var victory_chart=__webpack_require__("../../node_modules/victory-chart/es/victory-chart.js"),victory_axis=__webpack_require__("../../node_modules/victory-axis/es/victory-axis.js"),victory_area=__webpack_require__("../../node_modules/victory-area/es/victory-area.js"),victory_line=__webpack_require__("../../node_modules/victory-line/es/victory-line.js"),styles=__webpack_require__("./src/components/display/ZigChart/styles.ts"),hooks=__webpack_require__("./src/components/display/ZigChart/hooks.ts"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");const ZigChartMini=({data,midLine,height,width,gradientVariant="mini",chartProps={},precision,...additionalProps})=>{const{data:processedData,color,gradient}=(0,hooks.q)(data,gradientVariant,precision);return(0,jsx_runtime.jsx)(styles.gR,{height,...additionalProps,children:(0,jsx_runtime.jsxs)(victory_chart.k,{height,width,singleQuadrantDomainPadding:!1,domainPadding:{x:0,y:1},padding:{top:5,bottom:10,left:0,right:0},...chartProps,children:[(0,jsx_runtime.jsx)(victory_axis.E,{style:{axis:{stroke:"transparent"},ticks:{stroke:"transparent"},tickLabels:{fill:"transparent"}}}),(0,jsx_runtime.jsx)(victory_area.b,{style:{data:{fill:`url(#${gradient})`,strokeWidth:2,stroke:color}},data:processedData,interpolation:"monotoneX"}),midLine&&(0,jsx_runtime.jsx)(victory_line.j,{style:{data:{stroke:"grey",strokeDasharray:6,strokeWidth:2,strokeOpacity:.7}},data:[{x:0,y:0},{x:processedData.length-1,y:0}]})]})})};ZigChartMini.displayName="ZigChartMini";const ZigChart_ZigChartMini=ZigChartMini;try{ZigChartMini.displayName="ZigChartMini",ZigChartMini.__docgenInfo={description:"",displayName:"ZigChartMini",props:{sx:{defaultValue:null,description:"",name:"sx",required:!1,type:{name:"SxProps<{}> | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string | undefined"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"AxisFormat[] | number[]"}},precision:{defaultValue:null,description:"",name:"precision",required:!1,type:{name:"number | undefined"}},midLine:{defaultValue:null,description:"",name:"midLine",required:!1,type:{name:"boolean | null | undefined"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"number | undefined"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number | undefined"}},gradientVariant:{defaultValue:{value:"mini"},description:"",name:"gradientVariant",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"mini"'},{value:'"full"'},{value:'"card"'}]}},chartProps:{defaultValue:{value:"{}"},description:"",name:"chartProps",required:!1,type:{name:"VictoryChartProps | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/display/ZigChart/ZigChartMini/index.tsx#ZigChartMini"]={docgenInfo:ZigChartMini.__docgenInfo,name:"ZigChartMini",path:"src/components/display/ZigChart/ZigChartMini/index.tsx#ZigChartMini"})}catch(__react_docgen_typescript_loader_error){}const stories={title:"Display/Charts/ZigChartMini",component:ZigChart_ZigChartMini,argTypes:{midLine:{control:"radio",options:{on:!0,off:!1}},height:{control:"number"}}},Template=args=>(0,jsx_runtime.jsx)(ZigChart_ZigChartMini,{...args});Template.displayName="Template";const ExampleChart=Template.bind({});ExampleChart.args={data:[{x:"Jul 1",y:10},{x:"Jul 2",y:15},{x:"Jul 3",y:23},{x:"Jul 4",y:15},{x:"Jul 5",y:17},{x:"Jul 6",y:20},{x:"Jul 7",y:25}],height:150,midLine:!0};const ExampleChart2=Template.bind({});ExampleChart2.args={data:[{x:"Jul 1",y:10},{x:"Jul 2",y:15},{x:"Jul 3",y:23},{x:"Jul 4",y:15},{x:"Jul 5",y:-17},{x:"Jul 6",y:20},{x:"Jul 7",y:-25}],midLine:!0,height:100}},"./src/components/display/ZigChart/hooks.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{q:()=>useChartData});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/display/ZigChart/types.ts"),_ZigChart_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/display/ZigChart/ZigChart/util.ts");const getGradient=(gradientVariant,isGreen)=>{switch(gradientVariant){case"mini":return isGreen?_types__WEBPACK_IMPORTED_MODULE_1__.x.GreenMini:_types__WEBPACK_IMPORTED_MODULE_1__.x.RedMini;case"card":return isGreen?_types__WEBPACK_IMPORTED_MODULE_1__.x.GreenCard:_types__WEBPACK_IMPORTED_MODULE_1__.x.RedCard;default:return isGreen?_types__WEBPACK_IMPORTED_MODULE_1__.x.GreenFull:_types__WEBPACK_IMPORTED_MODULE_1__.x.RedFull}},getYDomain=data=>{const values=data.map((s=>s.y));if(0===values.length)return[0,0];const ranges=[Math.min(0,...values),Math.max(...values)];return ranges[0]<0&&ranges[1]>0?ranges[0]=Math.min(ranges[0],-1*ranges[1]*.2/.8):ranges[1]<=0&&(ranges[1]=.01*Math.abs(ranges[1]-ranges[0])),ranges};function useChartData(data,gradientVariant="full",precision){const chartColors=(0,_ZigChart_util__WEBPACK_IMPORTED_MODULE_2__.w)(),[processedData,yDomain]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>{const chart=data.map(((value,index)=>{const{x,y,...rest}="object"==typeof value?value:{x:index,y:value};return{x,y:precision?+y.toFixed(precision):y,...rest}})),yDomain=getYDomain(chart);return[chart.map((c=>({...c,y0:yDomain[0]}))),yDomain]}),[data]),firstTimestamp=processedData[0]?.y,lastTimeStamp=processedData[data.length-1]?.y,isGreen=firstTimestamp<=lastTimeStamp;return{data:processedData,color:isGreen?chartColors.green:chartColors.red,gradient:getGradient(gradientVariant,isGreen),yDomain}}},"./src/components/display/ZigChart/styles.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{SZ:()=>useAxisStyle,gR:()=>ChartLayoutMini,o4:()=>ChartLayoutLarge});var _mui_system__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/@mui/system/esm/styled.js"),_mui_material__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@mui/material/styles/useTheme.js");const ChartLayoutLarge=(0,_mui_system__WEBPACK_IMPORTED_MODULE_0__.Z)("div")`
  width: 100%;
  z-index: 3;

  svg {
    overflow: visible;
  }
`,ChartLayoutMini=(0,_mui_system__WEBPACK_IMPORTED_MODULE_0__.Z)("div")`
  height: ${props=>props.height||100}px;
  width: 100%;
  display: block;
  margin-bottom: 10px;
  position: relative;
  &:before {
    content: "";
    position: absolute;
    width: 100%;
    height: 100%;
    display: flex;
    z-index: 5;
  }
`,useAxisStyle=()=>{const theme=(0,_mui_material__WEBPACK_IMPORTED_MODULE_1__.Z)();return{axisLabel:{fontSize:20,padding:30,fill:theme.palette.neutral200,fontFamily:theme.typography.fontFamily,letterSpacing:.55,lineHeight:16},tickLabels:{fontSize:11,padding:7,fill:theme.palette.neutral200,fontFamily:theme.typography.fontFamily,letterSpacing:.55,lineHeight:16}}}}}]);
//# sourceMappingURL=components-display-ZigChart-ZigChartMini-stories.f862e598.iframe.bundle.js.map